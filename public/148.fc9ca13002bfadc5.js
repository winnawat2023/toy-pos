"use strict";(self.webpackChunkangular_material_template=self.webpackChunkangular_material_template||[]).push([[148],{148:(M,E,s)=>{s.r(E),s.d(E,{ProductModule:()=>D});var l=s(6895),p=s(6159),_=s(6797),d=s(4004),t=s(4650),a=s(7327),h=s(3560),o=s(4006);function y(r,n){if(1&r&&(t.TgZ(0,"option",16),t._uU(1),t.qZA()),2&r){const e=n.$implicit;t.Q6J("ngValue",e),t.xp6(1),t.Oqu(e.title)}}function f(r,n){if(1&r&&(t.TgZ(0,"option",16),t._uU(1),t.qZA()),2&r){const e=n.$implicit;t.Q6J("ngValue",e),t.xp6(1),t.Oqu(e.title)}}function b(r,n){if(1&r&&(t.TgZ(0,"label",22),t._uU(1),t.qZA()),2&r){const e=t.oxw().$implicit,u=t.oxw();t.xp6(1),t.hij(" ",u.shopService.getShopStatus(e.published),"")}}function T(r,n){if(1&r&&(t.TgZ(0,"label",23),t._uU(1),t.qZA()),2&r){const e=t.oxw().$implicit,u=t.oxw();t.xp6(1),t.hij(" ",u.shopService.getShopStatus(e.published),"")}}const Z=function(){return["/product/detail"]};function v(r,n){if(1&r){const e=t.EpF();t.TgZ(0,"tr")(1,"th"),t._uU(2),t.qZA(),t.TgZ(3,"div",17),t._UZ(4,"img",18),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t.YNc(12,b,2,1,"label",19),t.YNc(13,T,2,1,"label",20),t.qZA(),t.TgZ(14,"td")(15,"button",21),t.NdJ("click",function(){const c=t.CHM(e).$implicit,m=t.oxw();return t.KtG(m.setActiveProduct(c))}),t._uU(16," \u0e23\u0e32\u0e22\u0e25\u0e30\u0e40\u0e2d\u0e35\u0e22\u0e14 "),t.qZA()()()}if(2&r){const e=n.$implicit,u=n.index,i=t.oxw();t.xp6(2),t.Oqu(u+1),t.xp6(2),t.s9C("src",i.getImagePath(e),t.LSH),t.xp6(2),t.Oqu(e.title),t.xp6(2),t.hij("",e.description," "),t.xp6(2),t.Oqu(e.price),t.xp6(2),t.Q6J("ngIf",e.published),t.xp6(1),t.Q6J("ngIf",!e.published),t.xp6(2),t.Q6J("routerLink",t.DdM(8,Z))}}let g=(()=>{class r{constructor(e,u,i,c){this.shopService=e,this.router=u,this.productService=i,this.fb=c}ngOnInit(){this.fillterForm=this.fb.group({shop:[],type:[]}),this.refreshShopList()}refreshShopList(){this.retrieveShops()}retrieveShops(){this.shopService.getAll().snapshotChanges().pipe((0,d.U)(e=>e.map(u=>({key:u.payload.key,...u.payload.val()})))).subscribe(e=>{this.shops=e,this.shops&&(this.fillterForm.get("shop").setValue(this.shops[0]),this.retrieveProductType())})}retrieveProductType(){let e=this.fillterForm.get("shop").value;this.productService.getProductType(e).snapshotChanges().pipe((0,d.U)(u=>u.map(i=>({key:i.payload.key,...i.payload.val()})))).subscribe(u=>{this.types=u,console.log(this.types),this.types&&(this.fillterForm.get("type").setValue(this.types[0]),this.refreshProductList())})}refreshProductList(){this.retrieveProduct()}retrieveProduct(){let e=this.fillterForm.get("type").value;this.productService.getAllProductByType(e).snapshotChanges().pipe((0,d.U)(u=>u.map(i=>({key:i.payload.key,...i.payload.val()})))).subscribe(u=>{this.procucts=u})}shopChange(){console.log("shopChange",this.fillterForm.get("shop").value),this.retrieveProductType()}typeChange(){console.log("typeChange",this.fillterForm.get("type").value),this.retrieveProduct()}addProduct(){this.shopService.currentShop=this.fillterForm.get("shop").value,this.productService.currentProductType=this.fillterForm.get("type").value,this.router.navigate(["/product/add"])}setActiveProduct(e){this.productService.currentProduct=e,this.router.navigate(["/product/detail"])}getImagePath(e){return e.image?e.image:"../../../../assets/images/user.png"}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(a.d),t.Y36(p.F0),t.Y36(h.M),t.Y36(o.qu))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-product-list"]],decls:42,vars:4,consts:[[1,"card"],[1,"card-header"],[1,"row","g-2"],[1,"col-auto"],[1,"card-title"],[1,"btn","btn-sm","btn-success",3,"click"],[1,"card-body"],[3,"formGroup"],["type","text","readonly","","id","staticEmail2","value","\u0e40\u0e25\u0e37\u0e2d\u0e01\u0e23\u0e49\u0e32\u0e19\u0e04\u0e49\u0e32",1,"form-control-plaintext"],["name","shop","id","shop","formControlName","shop",1,"form-control",3,"change"],[3,"ngValue",4,"ngFor","ngForOf"],["type","text","readonly","","id","staticEmail2","value","\u0e1b\u0e23\u0e30\u0e40\u0e20\u0e17\u0e2a\u0e34\u0e19\u0e04\u0e49\u0e32",1,"form-control-plaintext"],["name","type","id","type","formControlName","type",1,"form-control",3,"change"],[1,"table","table-striped","table-bordered","table-hover","table-responsive"],["scope","col"],[4,"ngFor","ngForOf"],[3,"ngValue"],[1,"text-center"],[1,"rounded",3,"src"],["class","btn btn-sm btn-success",4,"ngIf"],["class","btn btn-sm btn-warning",4,"ngIf"],["routerLinkActive","active",1,"btn","btn-sm","btn-primary",3,"routerLink","click"],[1,"btn","btn-sm","btn-success"],[1,"btn","btn-sm","btn-warning"]],template:function(e,u){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h4",4),t._uU(5,"\u0e2a\u0e34\u0e19\u0e04\u0e49\u0e32"),t.qZA()(),t.TgZ(6,"div",3)(7,"button",5),t.NdJ("click",function(){return u.addProduct()}),t._uU(8," \u0e40\u0e1e\u0e34\u0e48\u0e21 "),t.qZA()()()(),t.TgZ(9,"div",6)(10,"form",7)(11,"div",2)(12,"div",3),t._UZ(13,"input",8),t.qZA(),t.TgZ(14,"div",3)(15,"select",9),t.NdJ("change",function(){return u.shopChange()}),t.YNc(16,y,2,2,"option",10),t.qZA()()(),t.TgZ(17,"div",2)(18,"div",3),t._UZ(19,"input",11),t.qZA(),t.TgZ(20,"div",3)(21,"select",12),t.NdJ("change",function(){return u.typeChange()}),t.YNc(22,f,2,2,"option",10),t.qZA()()()(),t._UZ(23,"br"),t.TgZ(24,"table",13)(25,"thead")(26,"tr")(27,"th",14),t._uU(28,"\u0e25\u0e33\u0e14\u0e31\u0e1a"),t.qZA(),t.TgZ(29,"th",14),t._uU(30,"\u0e23\u0e39\u0e1b\u0e2a\u0e34\u0e19\u0e04\u0e49\u0e32"),t.qZA(),t.TgZ(31,"th",14),t._uU(32,"\u0e0a\u0e37\u0e48\u0e2d\u0e2a\u0e34\u0e19\u0e04\u0e49\u0e32"),t.qZA(),t.TgZ(33,"th",14),t._uU(34,"\u0e23\u0e32\u0e22\u0e25\u0e30\u0e40\u0e2d\u0e35\u0e22\u0e14"),t.qZA(),t.TgZ(35,"th",14),t._uU(36,"\u0e23\u0e32\u0e04\u0e32"),t.qZA(),t.TgZ(37,"th",14),t._uU(38,"\u0e2a\u0e16\u0e32\u0e19\u0e30"),t.qZA(),t._UZ(39,"th",14),t.qZA()(),t.TgZ(40,"tbody"),t.YNc(41,v,17,9,"tr",15),t.qZA()()()()),2&e&&(t.xp6(10),t.Q6J("formGroup",u.fillterForm),t.xp6(6),t.Q6J("ngForOf",u.shops),t.xp6(6),t.Q6J("ngForOf",u.types),t.xp6(19),t.Q6J("ngForOf",u.procucts))},dependencies:[l.sg,l.O5,o._Y,o.YN,o.Kr,o.EJ,o.JJ,o.JL,o.sg,o.u,p.rH,p.Od],styles:[".list[_ngcontent-%COMP%]{text-align:left;margin:auto}th[_ngcontent-%COMP%]{text-align:center}img[_ngcontent-%COMP%]{width:100px;height:100px}form[_ngcontent-%COMP%]{max-width:95%;margin:auto}"]}),r})(),A=(()=>{class r{constructor(e,u,i,c){this.router=e,this.fb=u,this.shopService=i,this.productService=c,this.shopName="",this.productTypeName="",this.imageURL="../../../../assets/images/user.png"}ngOnInit(){this.productForm=this.fb.group({shopKey:[null,o.kI.required],productTypeKey:[null,o.kI.required],title:[null,[o.kI.required,o.kI.minLength(3)]],description:[null,[o.kI.required,o.kI.minLength(5)]],published:[!1,o.kI.required],image:[null,o.kI.required],price:[0,o.kI.required],stock:[0,o.kI.required]}),this.shopService.currentShop&&this.productService.currentProductType?(this.productForm.get("shopKey").setValue(this.shopService.currentShop.key),this.productForm.get("productTypeKey").setValue(this.productService.currentProductType.key),this.shopName=this.shopService.currentShop.title,this.productTypeName=this.productService.currentProductType.title):this.router.navigate(["/product"])}addProduct(){console.log("add product",this.productForm.value),this.productService.createProduct(this.productForm.value),this.router.navigate(["/product"])}selectFile(e){this.selectedFiles=e.target.files;const u=this.selectedFiles.item(0),i=new FileReader;i.onload=c=>{console.log(c.target.result),this.imageURL=c.target.result,this.productForm.get("image").setValue(c.target.result)},i.readAsDataURL(u)}getBack(){this.router.navigate(["/product"])}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(p.F0),t.Y36(o.qu),t.Y36(a.d),t.Y36(h.M))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-product-add"]],decls:41,vars:5,consts:[[3,"formGroup"],[1,"card"],[1,"card-header"],[1,"card-body"],[1,"mb-3"],[1,"form-label"],["for","productName",1,"form-label"],["type","text","id","productName","formControlName","title",1,"form-control"],["for","description",1,""],["name","description","id","description","rows","3","formControlName","description",1,"form-control"],[1,"form-check","form-switch"],["type","checkbox","role","switch","id","published","formControlName","published",1,"form-check-input"],["for","published",1,"form-check-label"],[1,"form-group"],["for","image"],[1,"text-left"],[1,"rounded",3,"src"],["type","file",1,"text-nowrap","text-truncate",3,"change"],["for","price",1,"form-label"],["type","number","id","price","formControlName","price",1,"form-control"],[1,"card-footer","text-muted"],[1,"btn","btn-warning",3,"click"],[1,"btn","btn-sm","btn-success",3,"disabled","click"]],template:function(e,u){1&e&&(t.TgZ(0,"form",0)(1,"div",1)(2,"div",2)(3,"h5"),t._uU(4,"\u0e40\u0e1e\u0e34\u0e48\u0e21\u0e2a\u0e34\u0e19\u0e04\u0e49\u0e32"),t.qZA()(),t.TgZ(5,"div",3)(6,"div",4)(7,"label",5),t._uU(8),t.qZA()(),t.TgZ(9,"div",4)(10,"label",5),t._uU(11),t.qZA()(),t.TgZ(12,"div",4)(13,"label",6),t._uU(14,"\u0e0a\u0e37\u0e48\u0e2d\u0e2a\u0e34\u0e19\u0e04\u0e49\u0e32"),t.qZA(),t._UZ(15,"input",7),t.qZA(),t.TgZ(16,"div",4)(17,"label",8),t._uU(18,"\u0e23\u0e32\u0e22\u0e25\u0e30\u0e40\u0e2d\u0e35\u0e22\u0e14"),t.qZA(),t._UZ(19,"textarea",9),t.qZA(),t.TgZ(20,"div",10),t._UZ(21,"input",11),t.TgZ(22,"label",12),t._uU(23,"\u0e43\u0e0a\u0e49\u0e07\u0e32\u0e19"),t.qZA()(),t._UZ(24,"br"),t.TgZ(25,"div",13)(26,"label",14),t._uU(27,"\u0e23\u0e39\u0e1b\u0e2a\u0e34\u0e19\u0e04\u0e49\u0e32"),t.qZA(),t.TgZ(28,"div",15),t._UZ(29,"img",16),t.qZA(),t.TgZ(30,"input",17),t.NdJ("change",function(c){return u.selectFile(c)}),t.qZA()(),t._UZ(31,"br"),t.TgZ(32,"div",4)(33,"label",18),t._uU(34,"\u0e23\u0e32\u0e04\u0e32"),t.qZA(),t._UZ(35,"input",19),t.qZA()(),t.TgZ(36,"div",20)(37,"button",21),t.NdJ("click",function(){return u.getBack()}),t._uU(38," \u0e01\u0e25\u0e31\u0e1a "),t.qZA(),t.TgZ(39,"button",22),t.NdJ("click",function(){return u.addProduct()}),t._uU(40,"\u0e40\u0e1e\u0e34\u0e48\u0e21"),t.qZA()()()()),2&e&&(t.Q6J("formGroup",u.productForm),t.xp6(8),t.hij("\u0e23\u0e49\u0e32\u0e19\u0e04\u0e49\u0e32 : ",u.shopName,""),t.xp6(3),t.hij("\u0e1b\u0e23\u0e30\u0e40\u0e20\u0e17\u0e2a\u0e34\u0e19\u0e04\u0e49\u0e32 : ",u.productTypeName,""),t.xp6(18),t.s9C("src",u.imageURL,t.LSH),t.xp6(10),t.Q6J("disabled",!u.productForm.valid))},dependencies:[o._Y,o.Fj,o.wV,o.Wl,o.JJ,o.JL,o.sg,o.u],styles:["img[_ngcontent-%COMP%]{width:200px;height:200px}"]}),r})();function P(r,n){if(1&r&&(t.TgZ(0,"option",18),t._uU(1),t.qZA()),2&r){const e=n.$implicit;t.Q6J("ngValue",e.key),t.xp6(1),t.Oqu(e.title)}}let k=(()=>{class r{constructor(e,u,i,c){this.router=e,this.fb=u,this.productService=i,this.shopService=c,this.imageURL="../../../../assets/images/user.png"}ngOnInit(){this.productForm=this.fb.group({key:[null,o.kI.required],shopKey:[null,o.kI.required],title:[null,[o.kI.required,o.kI.minLength(3)]],description:[null,[o.kI.required,o.kI.minLength(5)]],published:[null,o.kI.required],productTypeKey:[null,o.kI.required],image:[null,o.kI.required],stock:[0,o.kI.required],price:[0,o.kI.required]}),this.productService.currentProduct?(this.currentProduct=this.productService.currentProduct,console.log(this.currentProduct),this.productForm.get("key").setValue(this.currentProduct.key),this.productForm.get("shopKey").setValue(this.currentProduct.shopKey),this.productForm.get("title").setValue(this.currentProduct.title),this.productForm.get("description").setValue(this.currentProduct.description),this.productForm.get("published").setValue(this.currentProduct.published),this.productForm.get("productTypeKey").setValue(this.currentProduct.productTypeKey),this.productForm.get("image").setValue(this.currentProduct.image),this.productForm.get("stock").setValue(this.currentProduct.stock),this.productForm.get("price").setValue(this.currentProduct.price),this.imageURL=this.currentProduct.image,this.retrieveProductType(this.currentProduct.shopKey)):this.router.navigate(["/product"])}deleteProduct(){this.productService.deleteProduct(this.currentProduct.key),this.router.navigate(["/product"])}updateProduct(){this.currentProduct=this.productForm.value,this.productService.updateProduct(this.currentProduct),this.router.navigate(["/product/list"])}getBack(){this.router.navigate(["/product"])}selectFile(e){this.selectedFiles=e.target.files;const u=this.selectedFiles.item(0),i=new FileReader;i.onload=c=>{console.log(c.target.result),this.imageURL=c.target.result,this.productForm.get("image").setValue(c.target.result)},i.readAsDataURL(u)}typeChange(){}retrieveProductType(e){console.log("retrieveProductType",e),this.productService.getProductTypeByShopKey(e).snapshotChanges().pipe((0,d.U)(u=>u.map(i=>({key:i.payload.key,...i.payload.val()})))).subscribe(u=>{console.log("retrieveProductType",u),this.types=u})}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(p.F0),t.Y36(o.qu),t.Y36(h.M),t.Y36(a.d))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-product-detail"]],decls:41,vars:3,consts:[[1,"form-control",3,"formGroup"],[1,"form-group"],["for","title"],["name","type","id","type","formControlName","productTypeKey",1,"form-control",3,"change"],[3,"ngValue",4,"ngFor","ngForOf"],["type","text","id","title","formControlName","title","name","title",1,"form-control"],["for","description"],["name","description","id","description","rows","3","formControlName","description",1,"form-control"],[1,"form-check","form-switch"],["type","checkbox","role","switch","id","published","formControlName","published",1,"form-check-input"],["for","published",1,"form-check-label"],["type","number","formControlName","price"],[1,"text-left"],[1,"rounded",3,"src"],["type","file",1,"text-nowrap","text-truncate",3,"change"],[1,"btn","btn-danger",3,"click"],[1,"btn","btn-warning",3,"click"],["type","button",1,"btn","btn-primary",3,"click"],[3,"ngValue"]],template:function(e,u){1&e&&(t.TgZ(0,"form",0)(1,"h4"),t._uU(2,"\u0e23\u0e32\u0e22\u0e25\u0e30\u0e40\u0e2d\u0e35\u0e22\u0e14\u0e2a\u0e34\u0e19\u0e04\u0e49\u0e32"),t.qZA(),t.TgZ(3,"div",1)(4,"label",2),t._uU(5,"\u0e1b\u0e23\u0e30\u0e40\u0e20\u0e17\u0e2a\u0e34\u0e19\u0e04\u0e49\u0e32"),t.qZA(),t.TgZ(6,"select",3),t.NdJ("change",function(){return u.typeChange()}),t.YNc(7,P,2,2,"option",4),t.qZA()(),t.TgZ(8,"div",1)(9,"label",2),t._uU(10,"\u0e0a\u0e37\u0e48\u0e2d"),t.qZA(),t._UZ(11,"input",5),t.qZA(),t.TgZ(12,"div",1)(13,"label",6),t._uU(14,"\u0e23\u0e32\u0e22\u0e25\u0e30\u0e40\u0e2d\u0e35\u0e22\u0e14"),t.qZA(),t._UZ(15,"textarea",7),t.qZA(),t._UZ(16,"br"),t.TgZ(17,"div",1)(18,"div",8),t._UZ(19,"input",9),t.TgZ(20,"label",10),t._uU(21,"\u0e2a\u0e16\u0e32\u0e19\u0e30"),t.qZA()()(),t.TgZ(22,"div",1)(23,"label",6),t._uU(24,"\u0e23\u0e32\u0e04\u0e32"),t.qZA(),t._UZ(25,"input",11),t.qZA(),t._UZ(26,"br"),t.TgZ(27,"div",1)(28,"label",6),t._uU(29,"\u0e23\u0e39\u0e1b\u0e2a\u0e34\u0e19\u0e04\u0e49\u0e32"),t.qZA(),t.TgZ(30,"div",12),t._UZ(31,"img",13),t.qZA(),t.TgZ(32,"input",14),t.NdJ("change",function(c){return u.selectFile(c)}),t.qZA(),t._UZ(33,"br"),t.qZA()(),t._UZ(34,"br"),t.TgZ(35,"button",15),t.NdJ("click",function(){return u.deleteProduct()}),t._uU(36," \u0e25\u0e1a\n"),t.qZA(),t.TgZ(37,"button",16),t.NdJ("click",function(){return u.getBack()}),t._uU(38," \u0e01\u0e25\u0e31\u0e1a\n"),t.qZA(),t.TgZ(39,"button",17),t.NdJ("click",function(){return u.updateProduct()}),t._uU(40," \u0e1a\u0e31\u0e19\u0e17\u0e36\u0e01\n"),t.qZA()),2&e&&(t.Q6J("formGroup",u.productForm),t.xp6(7),t.Q6J("ngForOf",u.types),t.xp6(24),t.s9C("src",u.imageURL,t.LSH))},dependencies:[l.sg,o._Y,o.YN,o.Kr,o.Fj,o.wV,o.Wl,o.EJ,o.JJ,o.JL,o.sg,o.u],styles:["button[_ngcontent-%COMP%]{margin:5px}img[_ngcontent-%COMP%]{width:200px;height:200px}"]}),r})();class C{}let q=(()=>{class r{constructor(e,u,i,c){this.productService=e,this.router=u,this.shopService=i,this.fb=c,this.productType=new C,this.shopName=""}ngOnInit(){console.log("ProductTypeAddComponent ngOnInit",this.shopService.currentShop),this.shopService.currentShop?this.shopName=this.shopService.currentShop.title:this.router.navigate(["/product/type/list"]),this.productTypeForm=this.fb.group({shopKey:[this.shopService.currentShop.key,[o.kI.required]],title:["",[o.kI.required,o.kI.minLength(3)]],published:[!1,o.kI.required]})}create(){console.log("ProductTypeAddComponent create",this.productTypeForm.value),this.productType=this.productTypeForm.value,this.productService.createProductType(this.productType).then(()=>{console.log("Created new item successfully!"),this.goBack()})}goBack(){this.router.navigate(["/product/type/list"])}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(h.M),t.Y36(p.F0),t.Y36(a.d),t.Y36(o.qu))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-product-type-add"]],decls:21,vars:3,consts:[[3,"formGroup"],[1,"card"],[1,"card-header"],[1,"card-body"],[1,"form-group"],["for","title"],["type","text","id","title","formControlName","title","name","title",1,"form-control"],[1,"form-check","form-switch"],["type","checkbox","role","switch","id","published","formControlName","published",1,"form-check-input"],["for","published",1,"form-check-label"],[1,"card-footer","text-muted"],["type","button",1,"btn","btn-sm","btn-warning",3,"click"],["type","submit",1,"btn","btn-sm","btn-primary",3,"disabled","click"]],template:function(e,u){1&e&&(t.TgZ(0,"form",0)(1,"div",1)(2,"div",2)(3,"h5"),t._uU(4),t.qZA()(),t.TgZ(5,"div",3)(6,"div",4)(7,"label",5),t._uU(8,"\u0e0a\u0e37\u0e48\u0e2d"),t.qZA(),t._UZ(9,"input",6),t.qZA(),t._UZ(10,"br"),t.TgZ(11,"div",4)(12,"div",7),t._UZ(13,"input",8),t.TgZ(14,"label",9),t._uU(15,"\u0e2a\u0e16\u0e32\u0e19\u0e30"),t.qZA()()()(),t.TgZ(16,"div",10)(17,"button",11),t.NdJ("click",function(){return u.goBack()}),t._uU(18," \u0e01\u0e25\u0e31\u0e1a "),t.qZA(),t.TgZ(19,"button",12),t.NdJ("click",function(){return u.create()}),t._uU(20," \u0e1a\u0e31\u0e19\u0e17\u0e36\u0e01 "),t.qZA()()()()),2&e&&(t.Q6J("formGroup",u.productTypeForm),t.xp6(4),t.hij("\u0e40\u0e1e\u0e34\u0e48\u0e21\u0e1b\u0e23\u0e30\u0e40\u0e20\u0e17\u0e2a\u0e34\u0e19\u0e04\u0e49\u0e32 ",u.shopName,""),t.xp6(15),t.Q6J("disabled",!u.productTypeForm.valid))},dependencies:[o._Y,o.Fj,o.Wl,o.JJ,o.JL,o.sg,o.u],styles:[".submit-form[_ngcontent-%COMP%]{max-width:95%;margin:auto}button[_ngcontent-%COMP%]{margin-right:10px}img[_ngcontent-%COMP%]{width:100px;height:100px}"]}),r})();function U(r,n){if(1&r&&(t.TgZ(0,"option",13),t._uU(1),t.qZA()),2&r){const e=n.$implicit;t.Q6J("ngValue",e),t.xp6(1),t.Oqu(e.title)}}function F(r,n){if(1&r&&(t.TgZ(0,"label",17),t._uU(1),t.qZA()),2&r){const e=t.oxw().$implicit,u=t.oxw();t.xp6(1),t.hij(" ",u.shopService.getShopStatus(e.published),"")}}function S(r,n){if(1&r&&(t.TgZ(0,"label",18),t._uU(1),t.qZA()),2&r){const e=t.oxw().$implicit,u=t.oxw();t.xp6(1),t.hij(" ",u.shopService.getShopStatus(e.published),"")}}const x=function(){return["/product/type/detail"]};function J(r,n){if(1&r){const e=t.EpF();t.TgZ(0,"tr")(1,"th"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t.YNc(6,F,2,1,"label",14),t.YNc(7,S,2,1,"label",15),t.qZA(),t.TgZ(8,"td")(9,"button",16),t.NdJ("click",function(){const c=t.CHM(e).$implicit,m=t.oxw();return t.KtG(m.setActiveType(c))}),t._uU(10," \u0e23\u0e32\u0e22\u0e25\u0e30\u0e40\u0e2d\u0e35\u0e22\u0e14 "),t.qZA()()()}if(2&r){const e=n.$implicit,u=n.index;t.xp6(2),t.Oqu(u+1),t.xp6(2),t.Oqu(e.title),t.xp6(2),t.Q6J("ngIf",e.published),t.xp6(1),t.Q6J("ngIf",!e.published),t.xp6(2),t.Q6J("routerLink",t.DdM(5,x))}}let N=(()=>{class r{constructor(e,u,i,c){this.shopService=e,this.router=u,this.productService=i,this.fb=c}ngOnInit(){this.shopForm=this.fb.group({shop:[]}),this.refreshShopList()}refreshShopList(){this.retrieveShops()}retrieveShops(){this.shopService.getAll().snapshotChanges().pipe((0,d.U)(e=>e.map(u=>({key:u.payload.key,...u.payload.val()})))).subscribe(e=>{this.shops=e,this.shops&&(this.shopForm.get("shop").setValue(this.shops[0]),this.shopService.currentShop=this.shopForm.get("shop").value,this.retrieveProductType())})}shopChange(){console.log("shopChange",this.shopForm.get("shop").value),this.shopService.currentShop=this.shopForm.get("shop").value,this.retrieveProductType()}retrieveProductType(){let e=this.shopForm.get("shop").value;this.productService.getProductType(e).snapshotChanges().pipe((0,d.U)(u=>u.map(i=>({key:i.payload.key,...i.payload.val()})))).subscribe(u=>{this.types=u,console.log(this.types)})}getTypeStatus(e){this.shopService.getShopStatus(e)}setActiveType(e){this.productService.currentProductType=e,this.router.navigate(["/product/type/detail"])}addType(){this.shopService.currentShop=this.shopForm.get("shop").value,this.router.navigate(["/product/type/add"])}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(a.d),t.Y36(p.F0),t.Y36(h.M),t.Y36(o.qu))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-product-type-list"]],decls:28,vars:3,consts:[[1,"card"],[1,"card-header"],[1,"card-title"],[1,"card-body"],[1,"row","g-3",3,"formGroup"],[1,"col-auto"],["type","text","readonly","","id","staticEmail2","value","\u0e40\u0e25\u0e37\u0e2d\u0e01\u0e23\u0e49\u0e32\u0e19\u0e04\u0e49\u0e32",1,"form-control-plaintext"],["name","shop","id","shop","formControlName","shop",1,"form-control",3,"change"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"btn","btn-success",3,"click"],[1,"table","table-striped","table-bordered","table-hover","table-responsive"],["scope","col"],[4,"ngFor","ngForOf"],[3,"ngValue"],["class","btn btn-sm btn-success",4,"ngIf"],["class","btn btn-sm btn-warning",4,"ngIf"],["routerLinkActive","active",1,"btn","btn-sm","btn-primary",3,"routerLink","click"],[1,"btn","btn-sm","btn-success"],[1,"btn","btn-sm","btn-warning"]],template:function(e,u){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h4",2),t._uU(3,"\u0e1b\u0e23\u0e30\u0e40\u0e20\u0e17\u0e2a\u0e34\u0e19\u0e04\u0e49\u0e32"),t.qZA()(),t.TgZ(4,"div",3)(5,"form",4)(6,"div",5),t._UZ(7,"input",6),t.qZA(),t.TgZ(8,"div",5)(9,"select",7),t.NdJ("change",function(){return u.shopChange()}),t.YNc(10,U,2,2,"option",8),t.qZA()(),t.TgZ(11,"div",5)(12,"button",9),t.NdJ("click",function(){return u.addType()}),t._uU(13,"\u0e40\u0e1e\u0e34\u0e48\u0e21"),t.qZA()()(),t._UZ(14,"br"),t.TgZ(15,"div")(16,"table",10)(17,"thead")(18,"tr")(19,"th",11),t._uU(20,"\u0e25\u0e33\u0e14\u0e31\u0e1a"),t.qZA(),t.TgZ(21,"th",11),t._uU(22,"\u0e1b\u0e23\u0e30\u0e40\u0e20\u0e17\u0e2a\u0e34\u0e19\u0e04\u0e49\u0e32"),t.qZA(),t.TgZ(23,"th",11),t._uU(24,"\u0e2a\u0e16\u0e32\u0e19\u0e30"),t.qZA(),t._UZ(25,"th",11),t.qZA()(),t.TgZ(26,"tbody"),t.YNc(27,J,11,6,"tr",12),t.qZA()()()()()),2&e&&(t.xp6(5),t.Q6J("formGroup",u.shopForm),t.xp6(5),t.Q6J("ngForOf",u.shops),t.xp6(17),t.Q6J("ngForOf",u.types))},dependencies:[l.sg,l.O5,o._Y,o.YN,o.Kr,o.EJ,o.JJ,o.JL,o.sg,o.u,p.rH,p.Od],styles:[".list[_ngcontent-%COMP%]{text-align:left;margin:auto}th[_ngcontent-%COMP%]{text-align:center}img[_ngcontent-%COMP%]{width:100px;height:100px}form[_ngcontent-%COMP%]{max-width:95%;margin:auto}"]}),r})();const O=[{path:"",component:_.$,children:[{path:"",component:g},{path:"add",component:A},{path:"list",component:g},{path:"detail",component:k},{path:"type/add",component:q},{path:"type/detail",component:(()=>{class r{constructor(e,u,i,c){this.router=e,this.fb=u,this.productService=i,this.shopService=c,this.shopName=""}ngOnInit(){this.productTypeForm=this.fb.group({key:[null,o.kI.required],title:[null,[o.kI.required,o.kI.minLength(3)]],shopKey:[null,o.kI.required],published:[null,o.kI.required]}),this.productService.currentProductType&&this.shopService.currentShop?(this.shopName=this.shopService.currentShop.title,this.productTypeForm.get("key").setValue(this.productService.currentProductType.key),this.productTypeForm.get("title").setValue(this.productService.currentProductType.title),this.productTypeForm.get("shopKey").setValue(this.productService.currentProductType.shopKey),this.productTypeForm.get("published").setValue(this.productService.currentProductType.published)):this.router.navigate(["/product/type/list"])}deleteProductType(){this.productService.deleteProductType(this.productService.currentProductType),this.getBack()}updateProductType(){this.productService.updateProductType(this.productTypeForm.value),this.getBack()}getBack(){this.router.navigate(["/product/type/list"])}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(p.F0),t.Y36(o.qu),t.Y36(h.M),t.Y36(a.d))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-product-type-detail"]],decls:25,vars:2,consts:[[3,"formGroup"],[1,"card"],[1,"card-header"],[1,"card-body"],[1,"card-title"],[1,"form-group"],["for","title"],["type","text","id","title","formControlName","title","name","title",1,"form-control"],[1,"form-check","form-switch"],["type","checkbox","role","switch","id","published","formControlName","published",1,"form-check-input"],["for","published",1,"form-check-label"],[1,"card-footer","text-muted"],[1,"btn","btn-danger",3,"click"],[1,"btn","btn-warning",3,"click"],["type","submit",1,"btn","btn-primary",3,"click"]],template:function(e,u){1&e&&(t.TgZ(0,"form",0)(1,"div",1)(2,"h5",2),t._uU(3,"\u0e41\u0e01\u0e49\u0e44\u0e02\u0e1b\u0e23\u0e30\u0e40\u0e20\u0e17\u0e2a\u0e34\u0e19\u0e04\u0e49\u0e32"),t.qZA(),t.TgZ(4,"div",3)(5,"h5",4),t._uU(6),t.qZA(),t._UZ(7,"br"),t.TgZ(8,"div",5)(9,"label",6),t._uU(10,"\u0e0a\u0e37\u0e48\u0e2d\u0e1b\u0e23\u0e30\u0e40\u0e20\u0e17\u0e2a\u0e34\u0e19\u0e04\u0e49\u0e32"),t.qZA(),t._UZ(11,"input",7),t.qZA(),t._UZ(12,"br"),t.TgZ(13,"div",5)(14,"div",8),t._UZ(15,"input",9),t.TgZ(16,"label",10),t._uU(17,"\u0e2a\u0e16\u0e32\u0e19\u0e30"),t.qZA()()()(),t.TgZ(18,"div",11)(19,"button",12),t.NdJ("click",function(){return u.deleteProductType()}),t._uU(20," \u0e25\u0e1a "),t.qZA(),t.TgZ(21,"button",13),t.NdJ("click",function(){return u.getBack()}),t._uU(22," \u0e01\u0e25\u0e31\u0e1a "),t.qZA(),t.TgZ(23,"button",14),t.NdJ("click",function(){return u.updateProductType()}),t._uU(24," \u0e1a\u0e31\u0e19\u0e17\u0e36\u0e01 "),t.qZA()()()()),2&e&&(t.Q6J("formGroup",u.productTypeForm),t.xp6(6),t.Oqu(u.shopName))},dependencies:[o._Y,o.Fj,o.Wl,o.JJ,o.JL,o.sg,o.u],styles:["button[_ngcontent-%COMP%]{margin:5px}img[_ngcontent-%COMP%]{width:100px;height:100px}"]}),r})()},{path:"type/list",component:N}]}];let w=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[p.Bz.forChild(O),p.Bz]}),r})();var I=s(3927),Y=s(2404);let D=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[l.ez,I.m,w,Y.ShopModule]}),r})()}}]);